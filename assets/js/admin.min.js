jQuery(function(i){var e;i("#mas_wcvs_image_id").val()||i(".mas_wcvs_remove_image_button").hide(),i(document).on("click",".mas_wcvs_upload_image_button",function(t){t.preventDefault(),e||(e=wp.media.frames.downloadable_file=wp.media({title:mas_wcvs_admin_options.media_title,button:{text:mas_wcvs_admin_options.media_btn_text},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),i("#mas_wcvs_image_id").val(attachment.id),i("#mas_wcvs_image img").attr("src",attachment.url),i(".mas_wcvs_remove_image_button").show()}),e.open()}),i(document).on("click",".mas_wcvs_remove_image_button",function(t){return i("#mas_wcvs_image img").attr("src",mas_wcvs_admin_options.placeholder_img_src),i("#mas_wcvs_image_id").val(""),i(".mas_wcvs_remove_image_button").hide(),!1}),i(".mas_wcvs_color_picker").wpColorPicker();var c=i("#mas_wcvs-modal-container"),s=c.find(".spinner"),m=c.find(".message"),n=null;function o(){c.find(".mas_wcvs-term-name input, .mas_wcvs-term-slug input").val(""),s.removeClass("is-active"),m.removeClass("error success").hide(),c.hide()}i(document).on("click",".mas_wcvs_add_new_attribute",function(t){t.preventDefault();var e=i(this),a=wp.template("mas_wcvs-input-tax"),s={type:e.data("type"),tax:e.closest(".woocommerce_attribute").data("taxonomy")};c.find(".mas_wcvs-term-swatch").html(i("#tmpl-mas_wcvs-input-"+s.type).html()),c.find(".mas_wcvs-term-tax").html(a(s)),"color"===s.type&&c.find("input.mas_wcvs-input-color").wpColorPicker(),n=e.closest(".woocommerce_attribute.wc-metabox"),c.show()}).on("click",".mas_wcvs-modal-close, .mas_wcvs-modal-backdrop",function(t){t.preventDefault(),o()}),i(document).on("click",".mas_wcvs-new-attribute-submit",function(t){t.preventDefault();i(this).data("type");var e=!1,a={};c.find(".mas_wcvs-input").each(function(){var t=i(this);"slug"===t.attr("name")||t.val()?t.removeClass("error"):(t.addClass("error"),e=!0),a[t.attr("name")]=t.val()}),e||(s.addClass("is-active"),m.hide(),wp.ajax.send("mas_wcvs_add_new_attribute",{data:a,error:function(t){s.removeClass("is-active"),m.addClass("error").text(t).show()},success:function(t){s.removeClass("is-active"),m.addClass("success").text(t.msg).show(),n.find("select.attribute_values").append('<option value="'+t.id+'" selected="selected">'+t.name+"</option>"),n.find("select.attribute_values").change(),o()}}))})});